<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>SoundVisual - Node.js/ES6</title>
        <link rel="stylesheet" href="./styles.css" />
    </head>
    <body>
        <label class="file-label">
            <input type="file" id="audioFile" accept="audio/*" />
            <span class="file-button">Choose Audio File</span>
        </label>

        <!-- Canvas –≤ —Ü–µ–Ω—Ç—Ä–µ -->
        <div class="canvas-container">
            <canvas id="canvas"></canvas>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É -->
        <div class="controls">
            <button class="btnPlay">Play</button>
            <button class="btnPause">Pause</button>
            <button class="btnStop">Stop</button>

            <!-- –í—ã–±–æ—Ä –ø—Ä–æ—Ñ–∏–ª–µ–π -->
            <div class="profile-selector">
                <label for="profileSelect">Profile:</label>
                <select id="profileSelect" class="profile-select">
                    <option value="DEFAULT">Default</option>
                    <option value="ROCK">Rock</option>
                    <option value="ELECTRONIC">Electronic</option>
                    <option value="CLASSICAL">Classical</option>
                    <option value="MORRICONE">Morricone</option>
                </select>
            </div>

            <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ -->
            <label class="toggle-label">
                <input
                    type="checkbox"
                    id="adaptiveToggle"
                    class="toggle-input"
                />
                <span class="toggle-slider"></span>
                <span class="toggle-text">Auto Sense</span>
            </label>
        </div>

        <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å -->
        <script type="module" src="./src/main.js"></script>

        <div
            id="debug-test"
            style="position: fixed; top: 10px; right: 10px; z-index: 9999"
        >
            <button onclick="runTest()">üî¥ –¢–ï–°–¢ PIXIJS</button>
        </div>

        <script>
            async function runTest() {
                console.log('–ó–ê–ü–£–°–ö–ê–ï–ú –¢–ï–°–¢ PIXIJS');

                // –°–æ–∑–¥–∞–µ–º canvas –≤—Ä—É—á–Ω—É—é
                const testCanvas = document.createElement('canvas');
                testCanvas.width = 400;
                testCanvas.height = 300;
                testCanvas.style.position = 'fixed';
                testCanvas.style.top = '50px';
                testCanvas.style.right = '50px';
                testCanvas.style.border = '3px solid green';
                testCanvas.style.zIndex = '9999';
                document.body.appendChild(testCanvas);

                try {
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –£–ñ–ï –ò–ú–ü–û–†–¢–ò–†–û–í–ê–ù–ù–´–ô PIXI –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞
                    if (window.PIXI) {
                        console.log('PIXI —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω:', window.PIXI.VERSION);

                        const app = new PIXI.Application({
                            canvas: testCanvas,
                            width: 400,
                            height: 300,
                            backgroundColor: 0x1099bb,
                        });

                        const rect = new PIXI.Graphics();
                        rect.beginFill(0xff0000);
                        rect.drawRect(50, 50, 100, 100);
                        rect.endFill();
                        app.stage.addChild(rect);

                        console.log('‚úÖ –¢–ï–°–¢ –£–°–ü–ï–®–ï–ù: PixiJS —Ä–∞–±–æ—Ç–∞–µ—Ç');
                    } else {
                        console.error('‚ùå PIXI –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ window');
                    }
                } catch (error) {
                    console.error('‚ùå –¢–ï–°–¢ –ü–†–û–í–ê–õ–ï–ù:', error);
                }
            }
        </script>
    </body>
</html>
